configfile: 'config/config.yaml'

include: 'rules/genotyping.smk'
include: 'rules/discovery.smk'
include: 'rules/common-rules.smk'
include: 'rules/get-sample-list.smk'

""" # Removing the samples which exited with error during haplotagging.
samples.remove('NA20846')
samples.remove('NA18986')
samples.remove('HG03780')
samples.remove('HG00982')
samples.remove('HG01104') """

if config['pilot']:
    samples = sorted(samples)[0:10]

wildcard_constraints:
    sample='|'.join(samples)

rule genotype_experiment:
    input:
        expand('/gpfs/project/projects/medbioinf/users/spani/results/1000GP/svarp-giggles/chm13-90c.r518/genotypes/{sample}.vcf.gz', sample=samples),
        
rule svarp_experiment:
    input:
        expand('/gpfs/project/projects/medbioinf/users/spani/results/1000GP/svarp-giggles/chm13-90c.r518/svarp/{sample}/{sample}_svtigs_H1.fa', sample=samples),
        expand('/gpfs/project/projects/medbioinf/users/spani/results/1000GP/svarp-giggles/chm13-90c.r518/svarp/{sample}/{sample}_svtigs_H2.fa', sample=samples),
        expand('/gpfs/project/projects/medbioinf/users/spani/results/1000GP/svarp-giggles/chm13-90c.r518/svarp/{sample}/{sample}_svtigs_untagged.fa', sample=samples)

rule all:
    input:
        rules.genotype_experiment.input,
        rules.svarp_experiment.input
